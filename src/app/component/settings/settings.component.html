<app-header></app-header>


<div class="max-w-md mx-auto bg-white rounded-lg shadow-md p-8">
  <h2 class="text-2xl font-bold text-gray-900 mb-6">Change Password</h2>

  <form (ngSubmit)="onSubmit()" #passwordForm="ngForm" class="space-y-6">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Current Password</label>
      <input type="password" [(ngModel)]="passwords.currentPassword" name="currentPassword" required
        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
        placeholder="Enter current password">
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">New Password</label>
      <input type="password" [(ngModel)]="passwords.newPassword" name="newPassword" required
        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
        placeholder="Enter new password (min 6 characters)">
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Confirm New Password</label>
      <input type="password" [(ngModel)]="passwords.confirmPassword" name="confirmPassword" required
        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
        placeholder="Confirm new password">
    </div>

    <div *ngIf="error" class="p-3 bg-red-100 border border-red-400 text-red-700 rounded-md text-sm">
      {{ error }}
    </div>

    <div *ngIf="success" class="p-3 bg-green-100 border border-green-400 text-green-700 rounded-md text-sm">
      {{ success }}
    </div>

    <button type="submit" [disabled]="!passwordForm.valid || !passwordsMatch() || loading"
      class="btn btn-primary w-25 py-2 rounded-pill fw-bold">
      {{ loading ? 'Changing Password...' : 'Change Password' }}
    </button>
  </form>
</div>
<div class="save-boxs px-4 py-4">
  <form [formGroup]="orderForm" (ngSubmit)="additem()">
    <div class="pt-1 row">
      <!-- <div class="col">
                <label class="form-label">B/no:</label>
                <input type="text" class="form-control" placeholder="B/no">
              </div> -->
      <h1 class="text-center wd-title">Create Items</h1>
      <div class="d-flex justify-content-between gap-3  ">
      <div class="pt-1 w-100">
        <label class="form-label required">Item</label>
        <input formControlName="name" type="text" class="form-control" placeholder="Item" [ngClass]="{
                  'is-invalid': (submit && form['name'].errors) || (form['name'].invalid && (form['name'].dirty || form['name'].touched))
                }">
        <div *ngIf="
                                                    (submit && form['name'].errors) ||
                                                    (form['name'].invalid &&
                                                    (form['name'].dirty || form['name'].touched))
                                                    " class="invalid-feedback">
          <span *ngIf="form['name'].errors?.['required']">Item is required</span>
        </div>
      </div>
      <div class="pt-1 w-100">
        <label class="form-label required">Unit Price</label>
        <input formControlName="price" type="text" class="form-control" placeholder="Unit price" [ngClass]="{
                  'is-invalid': (submit && form['price'].errors) || (form['price'].invalid && (form['price'].dirty || form['price'].touched))
                }">
        <div *ngIf="
                                                    (submit && form['price'].errors) ||
                                                    (form['price'].invalid &&
                                                    (form['price'].dirty || form['price'].touched))
                                                    " class="invalid-feedback">
          <span *ngIf="form['price'].errors?.['required']">Unit price is required</span>
        </div>
      </div>
      </div>
      <div class="d-flex justify-content-end pt-2">
        <button class="btn btn-primary" >Add</button>
      </div>
    </div>
  </form>
  <div class="pt-1">
    <div class="d-flex justify-content-between align-items-center py-2">
      <div>
        <label>Items Details:</label>
      </div>
    </div>
    <table class="table table-striped table-bordered">
      <thead class="table-dark">
        <tr class="text-center">
          <th>Item</th>
          <th>Price</th>
          <th>Action</th>
          <!-- <th>Remove</th> -->
        </tr>
      </thead>
      <tbody
        *ngFor="let order of additems| paginate:{ itemsPerPage: limit, currentPage: page, totalItems:totalItems }; let i=index">
        <tr class="text-center">
          <td>{{order.name}}</td>
          <td>{{order.price}}</td>
          <td>
            <button class="btn btn-primary" (click)="deleteItem(order._id)">Delete</button>
          </td>
          <!-- <td> <button class="table-deletebtn" (click)="removeOrder(i)">Delete</button></td> -->
        </tr>
      </tbody>
    </table>
    <div class="d-flex justify-content-center">
      <pagination-controls (pageChange)="pageChanged($event)" [maxSize]="5" [directionLinks]="true" [autoHide]="true">
      </pagination-controls>
    </div>
  </div>
  <div class="row ">
    <div class="col">
    </div>
  </div>
  <!-- <div class="pt-3 row">
    <div class="col">
      <button type="submit" class="primaryBtn" (click)="createItems()">Save</button>
    </div>
  </div> -->
</div>