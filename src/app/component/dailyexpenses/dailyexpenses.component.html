<app-header></app-header>
<section class="py-5">
  <div class="">
    <div class="form-box ">
      <div class="col-lg-8 offset-lg-2">
        <div class="save-boxs px-4 py-4">
          <form [formGroup]="newOrderForm">
            <div class="pt-1 row">
              <!-- <div class="col">
                <label class="form-label">B/no:</label>
                <input type="text" class="form-control" placeholder="B/no">
              </div> -->
              <h1 class="text-center wd-title">Create Expense</h1>
              <div class="pt-1">
                <label class="form-label required">Item</label>
                <input formControlName="name" type="text" class="form-control" placeholder="Item" [ngClass]="{
                  'is-invalid': (submit && form['name'].errors) || (form['name'].invalid && (form['name'].dirty || form['name'].touched))
                }">
                <div *ngIf="
                                                    (submit && form['name'].errors) ||
                                                    (form['name'].invalid &&
                                                    (form['name'].dirty || form['name'].touched))
                                                    " class="invalid-feedback">
                  <span *ngIf="form['name'].errors?.['required']">Item is required</span>
                </div>
              </div>
              <div class="col">
                <label class="form-label required">Quantity</label>
                <input formControlName="kuri" type="text" class="form-control" placeholder="Quantiy" [ngClass]="{
                                'is-invalid': (submit && form['kuri'].errors) || (form['kuri'].invalid && (form['kuri'].dirty || form['kuri'].touched))
                                }">
                <div *ngIf="
                                    (submit && form['kuri'].errors) ||
                                    (form['kuri'].invalid &&
                                    (form['kuri'].dirty || form['kuri'].touched))
                                    " class="invalid-feedback">
                  <span *ngIf="form['kuri'].errors?.['required']">Quantiy is required</span>
                </div>
              </div>
            </div>

            <div class="pt-1">
              <label class="form-label required">Unit Price</label>
              <input formControlName="mobile" type="text" class="form-control" placeholder="Unit price" [ngClass]="{
                'is-invalid': (submit && form['mobile'].errors) || (form['mobile'].invalid && (form['mobile'].dirty || form['mobile'].touched))
              }">
              <div *ngIf="
                                                  (submit && form['mobile'].errors) ||
                                                  (form['mobile'].invalid &&
                                                  (form['mobile'].dirty || form['mobile'].touched))
                                                  " class="invalid-feedback">
                <span *ngIf="form['mobile'].errors?.['required']">Unit price is required</span>
              </div>
            </div>
          </form>
          <!-- <div class="pt-1">
            <div class="d-flex justify-content-between align-items-center py-2">
              <div>
                <label>Items Details:</label>
              </div>
             
            </div>
            <table class="table table-striped table-bordered">
              <thead class="table-dark">
                <tr class="text-center">
                  <th>Item</th>
                  <th>Qty</th>
                  <th>Amount</th>
                  <th>Total Amount</th>
                </tr>
              </thead>
              <tbody
                *ngFor="let order of orders| paginate:{ itemsPerPage: limit, currentPage: page, totalItems:totalItems }; let i=index">
                <tr class="text-center">
                  <td>{{order.item}}</td>
                  <td>{{order.quantity}}</td>
                  <td>{{order.unitprice}}</td>
                  <td>{{order.quantity * order.unitprice}}</td>
                </tr>
              </tbody>
            </table>
            <div class="d-flex justify-content-center">
              <pagination-controls (pageChange)="pageChanged($event)" [maxSize]="5" [directionLinks]="true"
                [autoHide]="true">
              </pagination-controls>
            </div>
          </div> -->
          <!-- <div class="row ">
            <div class="col">
            </div>
            <div class="col">
              <div class="row">
                <div class="col-5  d-flex align-items-center justify-content-center">
                  <label class="form-label text-end">Total Amount :</label>
                </div>
                <div class="col-7">
                  <input type="text" class="form-control" placeholder="Total amount" [value]="getTotalAmount()"
                    readonly>

                </div>
              </div>
            </div>
          </div> -->
          <div class="pt-3 row">
            <div class="col">
              <button type="submit" class="primaryBtn" (click)="formSubmit()">Save</button>
            </div>
          </div>
        </div>
        <div class="save-boxs px-4 py-4 mt-3">
          <h1 class="text-center wd-title">All Expenses</h1>
          <div class="d-flex justify-content-between align-items-center pb-2">
            <div *ngIf="this.selected === 'today' ">
              <input type="date" class="form-control" [(ngModel)]="selectedDate" (change)="onDateChange()" />
            </div>
            <form (ngSubmit)="submitFilter()" *ngIf="this.selected === 'month' ">
              <div class="d-flex gap-2">
              <select class="form-select select-items" [(ngModel)]="selectedMonth" name="month" required>
                <option value="" disabled>Select Month</option>
                <option *ngFor="let m of months" [value]="m.value">{{ m.name }}</option>
              </select>
            
              <select class="form-select select-items" [(ngModel)]="selectedYear" name="year" required>
                <option value="" disabled>Select Year</option>
                <option *ngFor="let y of years" [value]="y">{{ y }}</option>
              </select>
            
              <button type="submit" class="btn btn-primary">Filter</button>
              </div>
            </form>
            <div class="button-group">
              <!-- <label class="px-2">Select Period:</label> -->
              <button [class.active]="selected === 'today'" (click)="select('today')">Today</button>
              <button [class.active]="selected === 'month'" (click)="select('month')">This Month</button>
            </div>
          </div>
          <div *ngIf="this.selected === 'today' ">
          <table class="table table-striped table-bordered" >
            <thead class="table-dark">
              <tr class="text-center">
                <th>Item</th>
                <th>Qty</th>
                <th>Amount</th>
                <th>Total Amount</th>
                <!-- <th>Remove</th> -->
              </tr>
            </thead>
            <tbody
              *ngFor="let order of dateOrders| paginate:{ itemsPerPage: limit, currentPage: page, totalItems:totalItems }; let i=index">
              <tr class="text-center">
                <td>{{order.item}}</td>
                <td>{{order.quantity}}</td>
                <td>{{order.unitprice}}</td>
                <td>{{order.quantity * order.unitprice}}</td>
                <!-- <td> <button class="table-deletebtn" (click)="removeOrder(i)">Delete</button></td> -->
              </tr>
            </tbody>
          </table>
          <div class="col">
            <div class="row">
              <div class="col-5  d-flex align-items-center justify-content-center">
                <label class="form-label text-end">Total Amount :</label>
              </div>
              <div class="col-7">
                <input type="text" class="form-control" placeholder="Total amount" [value]="getTotalAmount()"
                  readonly>

                <!-- <input type="text" class="form-control" placeholder="Total amount"> -->
              </div>
            </div>
          </div>
          </div>
          <table class="table table-striped table-bordered" *ngIf="this.selected === 'month' ">
            <thead class="table-dark">
              <tr class="text-center">
                <th>Date</th>
                <!-- <th>Qty</th> -->
                <!-- <th>Amount</th> -->
                <th>Total Amount</th>
                <!-- <th>Remove</th> -->
              </tr>
            </thead>
            <tbody
              *ngFor="let order of dateOrdersmnth| paginate:{ itemsPerPage: limit, currentPage: page, totalItems:totalItems }; let i=index">
              <tr class="text-center">
                <td>{{order.date}}</td>
                <td>{{order.totalAmount}}</td>
                <!-- <td>{{order.unitprice}}</td> -->
                <!-- <td>{{order.quantity * order.unitprice}}</td> -->
                <!-- <td> <button class="table-deletebtn" (click)="removeOrder(i)">Delete</button></td> -->
              </tr>
            </tbody>
          </table>
          <div class="col" *ngIf="this.selected === 'month' ">
            <div class="row">
              <div class="col-5  d-flex align-items-center justify-content-center">
                <label class="form-label text-end">Total Amount :</label>
              </div>
              <div class="col-7">
                <input type="text" class="form-control" placeholder="Total amount" [value]="getTotalAmountmnth()"
                  readonly>

                <!-- <input type="text" class="form-control" placeholder="Total amount"> -->
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col">

      </div>
    </div>
  </div>
</section>